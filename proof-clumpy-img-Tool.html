<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TITLE</title>
<!--[if IE]><script type="text/javascript" src="js/excanvas.js"></script><![endif]-->
<script src="js/jquery-1.8.3.min.js"></script>
<script src="js/json2.js"></script>
<script src="js/clumpy/core/Clumpy.js"></script>
<script src="js/clumpy/img/Tool.js"></script>

<script>
    window.onload = onWindowLoaded;
    var imageTool = new clumpy_img_Tool();
    var frameWidth = 200;
    var frameHeight = 100;
    var frameX = 250;
    var frameY = 250;
    var imageWidth;
    var imageHeight;
    function onWindowLoaded(){
        imageWidth = $('#img').get(0).width;
        imageHeight = $('#img').get(0).height;
        $('#btn-fit').click(function(){ showImage('fit'); });
        $('#btn-fill').click(function(){ showImage('fill'); });
    }
    function showImage(fitOrFill) {
        var scale = imageTool.getScale(imageWidth, imageHeight, frameWidth, frameHeight, fitOrFill);
        var offset = imageTool.getCentredOffsets(imageWidth * scale, imageHeight * scale, frameWidth, frameHeight);
        $('#img').css({left:frameX + offset.x, top:frameY + offset.y, width:imageWidth * scale, height:imageHeight * scale});
    } 
    
</script>

<style>
    html, body {margin:0; padding:0; width:100%; height:100%;}
    #frame {position:absolute; z-index:2; top:250px; left:250px; width:198px; height:98px; border:1px solid black;}
    #img {position:absolute; z-index:1;}
    #btn-fit {position:absolute; z-index:3; top:0px; left:600px;}
    #btn-fill {position:absolute; z-index:4; top: 50px; left:600px;}
</style>
</head>
<body>
    <img id="img" src="images/d20.jpg" />
    <div id="frame">&nbsp;</div>
    <input id="btn-fit" value="fit" type="button" />
    <input id="btn-fill" value="fill" type="button" />
</body>
</html>